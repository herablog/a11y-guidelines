---
layout: single
title: 4.1.3 コンテンツの変更をユーザーに知らせる
---

# 4.1.3 コンテンツの変更をユーザーに知らせる

この項目の目的は、フォーカスが与えられてないコンテンツの変更をより多くのユーザーが認識できるようにすることである。
目が見えるユーザーはステータスメッセージを視覚的に確認することができるが、ロービジョンのユーザーは視覚的に確認することが難しい。
コンテンツに適切な役割、またはプロパティを与えることで、スクリーンリーダーなどの支援技術がユーザーにステータスメッセージを提示することができる。

フォーカスが与えられていないコンテンツに変更があった場合、目の見えるユーザーは視覚的に変更を確認することができる。
ロービジョンのユーザーは視覚的に確認することが難しいが、コンテンツに適切な役割を割り当てることで、スクリーンリーダーなどの支援技術が変更を伝えてくれる。

<details>
  <summary>ステータスメッセージとは</summary>
  コンテキストの変化ではなく、コンテンツにおける変化で、アクションの成功または結果、アプリケーションの待機状態、プロセスの進行状況、またはエラーの存在に関する情報。
</details>

## ステータスメッセージの具体例

- 数値を入力するフォームで数値ではない値を入力した場合に表示するエラーメッセージ
- 処理に長い時間がかかる場合などに表示するプログレスバー
- Ajaxなどでデータが取得できなかったときに表示するエラーメッセージ


## レビュー・テスト方法

- コードレビュー時、適切なライブリージョンが設定されてるか確認する
- コンテンツが変更されたときに、支援技術がちゃんと読み上げてくれるか確認する

## 実装方法

- 変更を知らせたい要素にrole属性とWAI-ARIAの `aria-live` 属性が指定さてている
- その要素がページロード時のDOMに存在している
- JavaScriptで通知したいテキストがその要素に挿入されるような処理が書かれている

### 入力フォームでのエラー表示

#### 良い実装例

```
<div id="error" role="alert" aria-live="assertive"></div>
```

#### 悪い実装例1

`role="alert"` しか指定されてない。
role属性をサポートしていないブラウザがあるので、WAI-ARIAの `aria-live="assertive"`も併用する。


```
<div id="error" role="alert"></div>
```


## 参考文献
- WCAG 2.0対応項目：原文 [4.1.3 Parsing](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html)
- [ARIA19: エラーを特定するために、ARIA role=alert 又はライブリージョン (Live Regions) を使用する](https://waic.jp/docs/WCAG-TECHS/ARIA19.html)
